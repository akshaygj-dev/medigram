<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Medigram</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        .clipped-text {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            /* Limit to 3 lines */
            overflow: hidden;
            text-overflow: ellipsis;
            /* Optional: adds '...' at the end */
        }
    </style>
</head>

<body>
    <!-- As a heading -->
    <nav class="navbar bg-danger sticky-top" data-bs-theme="dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-1 m-1 h1">Medigram</span>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row row-cols-2 g-4 m-2" id="news-container">
            <!-- News cards will be dynamically inserted here -->
        </div>
    </div>

    <script>
        // Replace with your NewsAPI key
        const apiKey = '76cb5a23937720bd65df5a0dfd051d18';
        const url = `https://gnews.io/api/v4/search?q=medical+health+medicine&max=25&apikey=${apiKey}`;

        // Fetch the news from GNews API
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const articles = data.articles;
                let newsHtml = '';

                // Loop through each article and create a Bootstrap card for each
                articles.forEach(article => {
                    newsHtml += `
              <div class="col">
                <div class="card" style="cursor: pointer;" onclick="window.open('${article.url}', '_blank')">
                  <img src="${article.image || 'https://via.placeholder.com/500'}" class="card-img-top" alt="${article.title}" style="max-height: 200px;">
                  <span class="badge rounded-pill text-bg-danger" style="position: absolute; right: 8px; top: 8px;">${article.source.name}</span>
                  <div class="card-body">
                    <h5 class="card-title text-danger clipped-text">${article.title}</h5>
                    <p class="card-text text-secondary clipped-text">${article.description || 'No description available.'}</p>
                  </div>
                </div>
              </div>
            `;
                });

                // Insert the generated news cards into the news-container div
                document.getElementById('news-container').innerHTML = newsHtml;
            })
            .catch(error => {
                console.error('Error fetching news:', error);
                document.getElementById('news-container').innerHTML = '<p class="text-danger">Failed to load news. Please try again later.</p>';
            });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>